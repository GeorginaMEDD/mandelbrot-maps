(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n(47)},38:function(e,t,n){},39:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),i=n.n(o),c=(n(38),n(4)),l=(n(39),n(65)),u=n(48),f=n(60),s=n(62);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var v=r.a.createElement("path",{d:"M11 11v-11h1v11h11v1h-11v11h-1v-11h-11v-1h11z"}),h=function(e){var t=e.svgRef,n=d(e,["svgRef"]);return r.a.createElement("svg",m({width:24,height:24,fillRule:"evenodd",clipRule:"evenodd",ref:t},n),v)},g=r.a.forwardRef(function(e,t){return r.a.createElement(h,m({svgRef:t},e))});n.p;function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var O=r.a.createElement("path",{d:"M0 12v1h23v-1h-23z"}),y=function(e){var t=e.svgRef,n=b(e,["svgRef"]);return r.a.createElement("svg",p({width:24,height:24,fillRule:"evenodd",clipRule:"evenodd",ref:t},n),O)},j=r.a.forwardRef(function(e,t){return r.a.createElement(y,p({svgRef:t},e))}),E=(n.p,n(28));function x(e){var t=e.children,n=Object(E.a)(e,["children"]);return r.a.createElement(f.a,Object.assign({style:{backgroundColor:"transparent",boxShadow:"none"}},n),t)}var w=n(9),R=n(14),V=n(15),z=n.n(V);function C(e){var t=Object(c.a)(e.controller,2),n=t[0],a=n.zoom,o=n.minZoom,i=n.maxZoom,l=t[1],f=function(e){var t=Math.sign(e)*(.1*a.getValue()+1);l({zoom:Object(V.clamp)(a.getValue()+t,o.getValue(),i.getValue())})};return r.a.createElement("div",{className:"Control",style:{width:70,display:"flex",zIndex:2}},r.a.createElement(u.a,{style:{borderRadius:"5em",maxHeight:240,margin:"auto",display:"flex",flexDirection:"column-reverse",justifyContent:"space-between"}},r.a.createElement(x,{onClick:function(e){e.preventDefault(),f(-1)}},r.a.createElement(j,null)),r.a.createElement("div",{style:{height:70,position:"relative"}},r.a.createElement(I,{diameter:70,zoom:a,zoomControl:l,minZoom:o,maxZoom:i})),r.a.createElement(x,{onClick:function(e){e.preventDefault(),f(1)}},r.a.createElement(g,null))))}function I(e){var t=Object(w.b)(function(){return{y:0,config:{friction:30,tension:400}}}),n=Object(c.a)(t,2),o=n[0].y,i=n[1],l=[e.zoom,e.zoomControl],u=l[0],m=l[1],d=Object(a.useState)(!1),v=Object(c.a)(d,2),h=v[0],g=v[1],p=Object(a.useState)(1),b=Object(c.a)(p,2),O=b[0],y=b[1],j=r.a.useRef(null);!function(e,t){var n=Object(a.useRef)();Object(a.useEffect)(function(){n.current=e}),Object(a.useEffect)(function(){if(null!==t){var e=setInterval(function(){n.current()},t);return function(){return clearInterval(e)}}},[t])}(function(){var t=u.getValue(),n=Object(V.clamp)(t+6e-5*Math.pow(t,.8)*O,e.minZoom.getValue(),e.maxZoom.getValue());m({zoom:n}),y(1.02*O)},h?100:null);var E=Object(R.b)(function(e){var t=e.down,n=Object(c.a)(e.movement,2),a=(n[0],n[1]),r=e.event,o=e.first,l=e.last;!o&&!l&&r.preventDefault(),g(t);var u=Object(V.clamp)(a,-80,80);y(t?-Math.sign(u)*Math.pow(Math.abs(u/8),4):0),i({y:t?u:0})},{event:{passive:!1,capture:!1},domTarget:j});return r.a.useEffect(E,[E]),r.a.createElement(w.a.div,{ref:j,style:{transform:o.interpolate(function(e){return"translateY(".concat(e,"px)")}),borderRadius:"50rem",width:e.diameter,height:e.diameter,marginLeft:-e.diameter/2,marginTop:-e.diameter/2,top:"50%",left:"50%",position:"absolute",zIndex:1}},r.a.createElement(f.a,{onClick:function(e){0===o.getValue()&&m({zoom:1})},style:{backgroundColor:"#2196f3",width:e.diameter,height:e.diameter}},r.a.createElement(s.a,{style:{color:"#fff"}},r.a.createElement(w.a.span,null,u.interpolate(function(e){return e.toPrecision(5)})))))}var M=n(66);function k(e){return r.a.createElement(M.a,{defaultValue:e.maxIter,valueLabelDisplay:"on",step:1,min:1,max:300,style:{width:200,margin:30},onChange:function(t,n){return e.setMaxIter(n)}})}function S(e){var t=Object(c.a)(e.controller,2),n=t[0],a=n.theta,o=n.itheta,i=t[1],l=function(e){return(e%360+360)%360},m=function(e){return 360*e/(2*Math.PI)},d={x:0,y:0,width:0,height:0},v=Object(R.b)(function(e){var t=Object(c.a)(e.xy,2),n=t[0],r=t[1],u=Object(c.a)(e.initial,2),f=u[0],s=u[1],v=e.first,h=e.memo,g=void 0===h?a.getValue():h,p=d.x+d.width/2,b=d.y+d.height/2;if(v)return i({theta:g,itheta:m(Math.atan2(-(f-p),s-b))}),g;var O=m(Math.atan2(-(n-p),r-b));return i({theta:g+l(O-o.getValue()),immediate:!0}),g});return r.a.createElement("div",Object.assign({style:{width:160,height:160,display:"flex",position:"relative",zIndex:2}},e),r.a.createElement(u.a,Object.assign({},v(),{ref:function(e){if(e){var t=e.getBoundingClientRect();d={x:t.x,y:t.y,width:t.width,height:t.height}}},style:{borderRadius:"50rem",width:160,height:160}}),r.a.createElement(w.a.div,{style:{transform:a.interpolate(function(e){return"rotate(".concat(e,"deg)")}),width:"100%",height:"100%",display:"flex",justifyContent:"center"}},r.a.createElement(s.a,{style:{userSelect:"none"}},"(N)"))),r.a.createElement(f.a,{style:{width:70,height:70,borderRadius:"50rem",backgroundColor:"#2196f3",display:"flex",position:"absolute",left:"50%",top:"50%",margin:-35}},r.a.createElement(s.a,{style:{color:"#fff",margin:"auto"}},r.a.createElement(w.a.span,null,a.interpolate(function(e){return l(e).toFixed(0)})),"\xb0")))}n(46);var _=n(63),P=n(64),D=n(27);function Z(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null),o=Object(a.useState)(null),i=Object(c.a)(o,2),l=i[0],u=i[1],f=400,m=e.maxiter,d=Object(c.a)(e.pos,2),v=d[0].pos,h=d[1],g=Object(c.a)(e.rot,2),p=g[0],b=p.theta,O=p.last_pointer_angle,y=g[1],j=Object(c.a)(e.zoom,2),E=j[0],x=E.zoom,V=E.last_pointer_dist,C=E.minZoom,I=E.maxZoom,M=j[1],k=Object(a.useState)(0),S=Object(c.a)(k,2),Z=S[0],F=S[1];function B(e,t,n){var a=(t-e)/n;return z.a.range(e,t,a)}var N=function(e){if(null!=l){var t=e||l,a=300*x.getValue();!function(e){var t=n.current;e.clearRect(0,0,t.width,t.height)}(t);var r=v.getValue(),o=Object(c.a)(r,2),i=o[0],u=o[1];console.log("x: ".concat(i,", y: ").concat(u));var s=[f,f].map(function(e){return e/(2*a)}),d=Object(c.a)(s,2),h=d[0],g=d[1];console.log("xmin: ".concat(i-h,", xmax: ").concat(i+h));var p=[-1,1].map(function(e){return i+e*h}),b=Object(c.a)(p,2),O=b[0],y=b[1],j=[-1,1].map(function(e){return u+e*g}),E=Object(c.a)(j,2),w=E[0],R=E[1];B(O,y,f).forEach(function(e,n){B(w,R,f).forEach(function(a,r){for(var o,i=0,c=0,l=0,u=0,f=0,s=0;s<m;s++){var d=[u-f+e,2*c*l+a];if(i=s,(u=(c=d[0])*c)+(f=(l=d[1])*l)>4)break}t.fillStyle="hsl(0, 0%, ".concat((o=i,100-Math.round(100*o/m)),"%)"),t.fillRect(n,r,1,1)})}),console.log("render complete!")}},T=Object(R.c)({onPinchStart:function(e){return e.event.preventDefault()},onPinch:function(e){var t=Object(c.a)(e.offset,2),n=t[0],a=t[1],r=e.down,o=Object(c.a)(e.vdva,2),i=(o[0],o[1],e.last,e.memo),l=void 0===i?[b.getValue(),O.getValue(),x.getValue(),V.getValue()]:i,u=Object(c.a)(l,4),f=u[0],s=u[1],m=u[2],d=u[3];console.log(n);var v=n/250,h=x.getValue();return M({zoom:z.a.clamp(m+(v-d)*Math.sign(h)*Math.abs(Math.pow(h,.9)),C.getValue(),I.getValue()),last_pointer_dist:v,immediate:r}),y({theta:f+(a-s),last_pointer_angle:a,immediate:r}),l},onPinchEnd:function(e){var t=Object(c.a)(e.vdva,2),n=(t[0],t[1]);y({theta:n,config:{velocity:n,decay:!0}})},onDragStart:function(e){return e.event.preventDefault()},onDrag:function(e){var t=e.down,n=e.movement,a=e.velocity,r=e.direction,o=e.memo,i=void 0===o?v.getValue():o,c=300*x.getValue(),l=n.map(function(e){return-e/c});return h({pos:Object(R.a)(l,i),immediate:t,config:{velocity:Object(D.scale)(r,-a/c),decay:!0}}),i},onDragEnd:function(){N(l)}},{event:{passive:!1,capture:!1},domTarget:t});return Object(a.useEffect)(T,[T]),Object(a.useEffect)(function(){var e=n.current.getContext("2d");console.log("got canvas context: ".concat(e)),u(e)},[]),Object(a.useEffect)(function(){N(l)},[l]),r.a.createElement(a.Fragment,null,r.a.createElement("div",{style:{position:"absolute",zIndex:1},ref:t},r.a.createElement(w.a.canvas,{id:"mandelbrot",width:f,height:f,rotation:b.interpolate(function(e){return"".concat(e)}),style:{width:1*f,height:1*f},ref:n}),r.a.createElement(w.a.div,{style:{display:"none",width:20,height:20,backgroundColor:"red",position:"absolute",top:290,left:290,transform:v.interpolate(function(e,t){return"translate(".concat(300*-e*x.getValue(),"px, ").concat(300*-t*x.getValue(),"px)")})}})),r.a.createElement("div",{style:{position:"absolute",bottom:0}},r.a.createElement(_.a,null,r.a.createElement(s.a,{style:{zIndex:1}},"theta: ",r.a.createElement(w.a.span,null,b.interpolate(function(e){return e.toFixed(3)})),", zoom: ",r.a.createElement(w.a.span,null,x.interpolate(function(e){return e.toFixed(3)})),",")),r.a.createElement(P.a,{variant:"contained",color:"primary",onClick:function(e){var t=performance.now();N();var n=performance.now()-t;console.log("rendered in ".concat(n)),F(n)}},"render"),r.a.createElement(s.a,null,"render time: ",Z.toFixed(4))))}var F=function(){var e={mass:1,tension:100,friction:200},t=Object(a.useState)(45),n=Object(c.a)(t,2),o=n[0],i=n[1],u=Object(w.b)(function(){return{pos:[-.74303,-.126433],onRest:function(){},config:e}}),f=Object(w.b)(function(){return{theta:0,last_pointer_angle:0,itheta:0,config:e}}),s=Object(w.b)(function(){return{zoom:1,last_pointer_dist:0,minZoom:.5,maxZoom:1e5,config:{mass:1,tension:600,friction:50}}});return r.a.createElement(a.Fragment,null,r.a.createElement(Z,{style:{position:"absolute",zIndex:0},pos:u,rot:f,zoom:s,maxiter:o}),r.a.createElement(l.a,{container:!0,direction:"column",justify:"space-evenly",alignItems:"flex-end"},r.a.createElement(C,{controller:s}),r.a.createElement(S,{className:"Control",controller:f,style:{display:"none"}}),r.a.createElement(k,{maxIter:o,setMaxIter:i})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.6a562a3c.chunk.js.map