{"version":3,"sources":["shaders/smooth_mandelbrot_shader.glsl","plus-icon.svg","minus-icon.svg","components/TransparentFab.js","components/ZoomBar.js","components/IterationSlider.jsx","components/RotationControl.js","shaders/fullVertexShader.js","shaders/smoothMandelbrotShader.js","components/MandelbrotRenderer.jsx","shaders/smoothJuliaShader.js","components/JuliaRenderer.jsx","App.js","components/utils.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","plus_icon_ref2","react_default","a","createElement","d","plus_icon_SvgPlusIcon","_ref","svgRef","props","width","height","fillRule","clipRule","ref","ForwardRef","forwardRef","minus_icon_extends","minus_icon_objectWithoutProperties","minus_icon_objectWithoutPropertiesLoose","minus_icon_ref2","minus_icon_SvgMinusIcon","minus_icon_ForwardRef","TransparentFab","children","objectWithoutProperties","Fab","style","backgroundColor","boxShadow","ZoomBar","_props$controller","slicedToArray","controller","_props$controller$","zoom","minZoom","maxZoom","setZoom","zoomClick","dir","z","Math","sign","getValue","clamp","className","display","zIndex","Paper","borderRadius","maxHeight","margin","flexDirection","justifyContent","onClick","e","preventDefault","position","ZoomBarFab","diameter","zoomControl","_useSpring","useSpring","y","config","friction","tension","_useSpring2","set","_useState","useState","_useState2","gestureDown","setGestureDown","_useState3","_useState4","zoomMult","setZoomMult","React","useRef","callback","delay","savedCallback","useEffect","current","id","setInterval","clearInterval","useInterval","oldZoom","pow","bind","useDrag","_ref2","down","_ref2$movement","movement","event","first","last","clampY","abs","passive","capture","domTarget","web","div","transform","interpolate","concat","marginLeft","marginTop","top","left","Typography","color","span","toPrecision","IterationSlider","_props$maxiter","maxiter","maxI","setMaxI","Slider","defaultValue","valueLabelDisplay","step","min","max","onChange","v","RotationControl","theta","itheta","clampAngle","t","radToDeg","r","PI","elemProps","x","_ref$xy","xy","_ref$initial","initial","ix","iy","_ref$memo","memo","cx","cy","atan2","newTheta","immediate","el","getBoundingClientRect","userSelect","toFixed","fullVertexShader","fullscreenVertexArray","smoothMandelbrotShader","MandelbrotRenderer","requestRef","gl","bufferInfo","programInfo","canvasRef","screenScaleMultiplier","screenmult","_props$controls$pos","controls","pos","_props$controls$pos$","setControlPos","realPos","_props$controls$rot","rot","_props$controls$rot$","last_pointer_angle","setControlRot","_props$controls$zoom","_props$controls$zoom$","last_pointer_dist","setControlZoom","touchBind","useGesture","onDragStart","onPinchStart","onPinch","_ref3","_ref3$offset","offset","_ref3$vdva","vdva","_ref3$memo","_memo","lpa","lpd","console","log","d_rel","curr_zoom","_","onPinchEnd","_ref4","_ref4$vdva","va","velocity","decay","onDrag","_ref5","direction","_ref5$memo","realZoom","canvas","plotMovement","scale","relMove","relDir","addV","render","useCallback","time","twgl","viewport","uniforms","resolution","u_zoom","u_pos","u_maxI","useProgram","program","requestAnimationFrame","getContext","cancelAnimationFrame","react","Card","bottom","padding","align","smoothJuliaShader","JuliaRenderer","App","size","isClient","window","getSize","innerWidth","undefined","innerHeight","windowSize","setWindowSize","addEventListener","handleResize","removeEventListener","useWindowSize","defaultSpringConfig","mass","maxIter","_maxIter","startPos","mandelbrotControls","map","Grid","container","justify","item","xs","alignItems","Boolean","location","hostname","match","ReactDOM","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.faf7d3d1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/smooth_mandelbrot_shader.d018da26.glsl\";","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M11 11v-11h1v11h11v1h-11v11h-1v-11h-11v-1h11z\"\n});\n\nvar SvgPlusIcon = function SvgPlusIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgPlusIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/plus-icon.e4581c1a.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 12v1h23v-1h-23z\"\n});\n\nvar SvgMinusIcon = function SvgMinusIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgMinusIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/minus-icon.8bace023.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\r\nimport { Fab } from '@material-ui/core';\r\n\r\nexport default function TransparentFab(props) {\r\n  const { children, ...p } = props;\r\n  return (\r\n      <Fab style={{\r\n        backgroundColor: \"transparent\",\r\n        boxShadow: \"none\",\r\n      }} {...p} >\r\n        {children}\r\n      </Fab>\r\n  )\r\n}","import React, { useState, useRef, useEffect } from 'react';\r\nimport { Paper, Fab, Typography } from '@material-ui/core';\r\nimport { ReactComponent as PlusIcon } from '../plus-icon.svg';\r\nimport { ReactComponent as MinusIcon } from '../minus-icon.svg';\r\nimport TransparentFab from \"./TransparentFab\";\r\nimport { useSpring, animated } from 'react-spring';\r\nimport { useDrag } from 'react-use-gesture';\r\nimport { clamp } from 'lodash';\r\n\r\n// https://upmostly.com/tutorials/setinterval-in-react-components-using-hooks\r\nfunction useInterval(callback, delay) {\r\n  const savedCallback = useRef();\r\n\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  });\r\n\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      let id = setInterval(tick, delay);\r\n      return () => clearInterval(id);\r\n    }\r\n  }, [delay]);\r\n}\r\n\r\n\r\nexport default function ZoomBar(props) {\r\n  let fabSize = 70;\r\n  let maxHeight = 240;\r\n\r\n  // let [minZoom, maxZoom] = [0.01, 1000]\r\n  // const [zoom, setZoom] = useState(100) // useSpring(() => ({ zoom: 100 }));\r\n  \r\n  const [{ zoom, minZoom, maxZoom }, setZoom] = props.controller;\r\n  // const [{ zoom }, setZoom] = useSpring(() => ({ zoom: 100, config: {\r\n  //   friction: 50, \r\n  //   tension: 600,\r\n  // }}));\r\n\r\n  const zoomClick = dir => {\r\n    // zoom in a particular direction\r\n    const z = Math.sign(dir) * (1e-1 * zoom.getValue() + 1);\r\n    setZoom({ zoom: clamp(zoom.getValue() + z, minZoom.getValue(), maxZoom.getValue()) });\r\n  }\r\n\r\n  return (\r\n    <div \r\n    className=\"Control\"\r\n    style={{\r\n      width: fabSize,\r\n      display: \"flex\",\r\n      zIndex: 10,\r\n    }}>\r\n        <Paper style={{\r\n          borderRadius: \"5em\",\r\n          maxHeight: maxHeight,\r\n          margin: \"auto\",\r\n          display: \"flex\",\r\n          flexDirection: \"column-reverse\",\r\n          justifyContent: \"space-between\",\r\n        }}>\r\n          <TransparentFab onClick={e => {\r\n            e.preventDefault();\r\n            zoomClick(-1);\r\n          }}>\r\n            <MinusIcon />\r\n          </TransparentFab>\r\n          <div style={{\r\n            height: fabSize,\r\n            position: \"relative\",\r\n          }}>\r\n            <ZoomBarFab \r\n              diameter={fabSize} \r\n              zoom={zoom} \r\n              zoomControl={setZoom} \r\n              minZoom={minZoom}\r\n              maxZoom={maxZoom}\r\n            />\r\n          </div>\r\n          <TransparentFab onClick={e => {\r\n            e.preventDefault();\r\n            zoomClick(1);\r\n          }}>\r\n            <PlusIcon />\r\n          </TransparentFab>\r\n        </Paper>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport function ZoomBarFab(props) {\r\n  const [{ y }, set] = useSpring(() => ({ y: 0, config: {\r\n     friction: 30, \r\n     tension: 400,\r\n    //  clamp: true,\r\n  }}))\r\n  \r\n  const [zoom, setZoom] = [props.zoom, props.zoomControl];\r\n  \r\n  const [gestureDown, setGestureDown] = useState(false);\r\n  const [zoomMult, setZoomMult] = useState(1);\r\n  const ref = React.useRef(null);\r\n  \r\n  const reset = () => {\r\n    setZoom({ zoom: 1 });\r\n  }\r\n\r\n  // determine speed to zoom at based on distance from center of the control\r\n  // updates zoom every 50ms based on the multiplier\r\n  useInterval(() => {\r\n    let oldZoom = zoom.getValue();\r\n    const z = clamp(oldZoom + 2 * 3e-5 * (oldZoom ** 0.8) * zoomMult, props.minZoom.getValue(), props.maxZoom.getValue())\r\n    setZoom({ zoom: z });\r\n    // increase zoom multiplier based on time elapsed\r\n    setZoomMult(zoomMult * 1.02);\r\n  }, gestureDown ? 100 : null);\r\n\r\n  const bind = useDrag(({ down, movement: [x, y], event, first, last }) => {\r\n    // only prevent default between first and last event\r\n    // first: prevents browser events\r\n    // last: allows buttons to activate and ripple\r\n    // event.preventDefault();\r\n    (!first && !last) && event.preventDefault();\r\n    \r\n    // tell zoom listener if drag is happening\r\n    setGestureDown(down);\r\n    \r\n    const limit = 80;\r\n    const clampY = clamp(y, -limit, limit)\r\n    \r\n    setZoomMult(down ? -Math.sign(clampY) * Math.abs(clampY / 8)**4 : 0)\r\n    set({ y: down ? clampY : 0 })\r\n    \r\n  }, { event: { passive: false, capture: false }, domTarget: ref })\r\n  \r\n  React.useEffect(bind, [bind])\r\n\r\n  return (\r\n    <animated.div \r\n      ref={ref}\r\n      style={{\r\n        transform: y.interpolate(y => `translateY(${y}px)`),\r\n        borderRadius: '50rem',\r\n        width: props.diameter,\r\n        height: props.diameter,\r\n\r\n        marginLeft: -props.diameter/2,\r\n        marginTop: -props.diameter/2,\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        position: \"absolute\",\r\n        zIndex: 1,\r\n      }} \r\n      >\r\n      <Fab \r\n        onClick={ e => {\r\n            // if click registered and fab not moved, trigger reset\r\n            if (y.getValue() === 0) { reset(); }\r\n          }\r\n        }\r\n        style={{\r\n          backgroundColor: \"#2196f3\",\r\n          width: props.diameter,\r\n          height: props.diameter,\r\n        }}>\r\n        <Typography style={{ color: \"#fff\" }}>\r\n          <animated.span>{zoom.interpolate(z => (z).toPrecision(6))}</animated.span>\r\n        </Typography>\r\n      </Fab>\r\n    </animated.div>\r\n  )\r\n}\r\n","import React from \"react\";\r\nimport { Slider } from \"@material-ui/core\";\r\n\r\nexport default function IterationSlider(props) {\r\n\r\n\r\n  let [maxI, setMaxI] = props.maxiter;\r\n  \r\n  return (\r\n    <Slider\r\n      defaultValue={maxI}\r\n      valueLabelDisplay=\"on\"\r\n      step={1}\r\n      min={1}\r\n      max={300}\r\n      style={{\r\n        width: 200,\r\n        margin: 30,\r\n      }}\r\n      onChange={(e, v) => setMaxI(v)}\r\n      {...props}\r\n    />\r\n  )\r\n}","import React from 'react';\r\nimport { Paper, Typography, Fab } from '@material-ui/core';\r\nimport { animated } from 'react-spring';\r\nimport { useDrag } from 'react-use-gesture';\r\n\r\n\r\nexport default function RotationControl(props) {\r\n\r\n  const [{ theta, itheta }, set] = props.controller;\r\n\r\n  const clampAngle = t => ((t % 360) + 360) % 360;\r\n\r\n  const radToDeg = r => (360 * r) / (2 * Math.PI);\r\n\r\n  var elemProps = { x: 0, y: 0, width: 0, height: 0 };\r\n\r\n  // const [elemCenter, setElemCenter] = useState([0, 0]);\r\n  // const [elemOffset, setElemOffset] = useState([0, 0]);\r\n\r\n  const outerSize = 160;\r\n  const innerSize = 70;\r\n\r\n  const bind = useDrag(({ xy: [x, y], initial: [ix, iy], first, memo = theta.getValue() }) => {\r\n\r\n    const [cx, cy] = [elemProps.x + elemProps.width / 2, elemProps.y + elemProps.height / 2];\r\n    if (first) {\r\n      // console.log(cx, cy)\r\n      // setElemCenter([cx, cy]);\r\n      // setElemOffset([ix - cx, iy - cy]);\r\n      set({\r\n        theta: memo,\r\n        // remember initial angle (of the cursor)\r\n        itheta: radToDeg(Math.atan2(-(ix - cx), iy - cy)),\r\n      })\r\n      return memo;\r\n    }\r\n\r\n    const newTheta = radToDeg(Math.atan2(-(x - cx), y - cy));\r\n\r\n    // const d = (360 * newTheta / (Math.PI * 2)) // - itheta.getValue() - memo;\r\n\r\n    // set current angle, delta since last\r\n    set({\r\n      theta: memo + clampAngle(newTheta - itheta.getValue()),\r\n      // prevTheta: theta.value,\r\n      // xy: [x, y] \r\n      immediate: true,\r\n    });\r\n\r\n    return memo;\r\n  })\r\n\r\n  return (\r\n    <div \r\n    style={{\r\n      width: outerSize,\r\n      height: outerSize,\r\n      display: 'flex',\r\n      position: 'relative',\r\n      zIndex: 2,\r\n    }}\r\n    {...props}\r\n    >\r\n      {/* <animated.div style={{\r\n        width: 10,\r\n        height: 10,\r\n        backgroundColor: \"red\",\r\n        // transform: xy.interpolate((x, y) => `translate3d(${x - 5}px, ${y - 5}px, 0)`),\r\n        // transform: xy.interpolate(xy => `translate(${x}, ${y})`),\r\n        position: \"fixed\",\r\n        top: 0,\r\n        left: 0,\r\n      }} /> */}\r\n      <Paper {...bind()}\r\n        ref={el => {\r\n          if (!el) return;\r\n          let r = el.getBoundingClientRect();\r\n          elemProps = { x: r.x, y: r.y, width: r.width, height: r.height }\r\n          // console.log(pos);\r\n        }}\r\n        style={{\r\n          borderRadius: '50rem',\r\n          width: outerSize,\r\n          height: outerSize,\r\n        }} >\r\n        {/* <div style={{\r\n          width: 10,\r\n          height: 10,\r\n          backgroundColor: \"aqua\",\r\n          transform: `translate3d(${- 5}px, ${- 5}px, 0)`,\r\n          // transform: xy.interpolate(xy => `translate(${x}, ${y})`),\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          zIndex: 2,\r\n        }} /> */}\r\n        <animated.div\r\n          style={{\r\n            transform: theta.interpolate(t =>\r\n              `rotate(${t}deg)`\r\n              // ((360 + theta.value + dt) % 360)\r\n              // .toFixed(1)\r\n            ),\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            display: \"flex\",\r\n            justifyContent: 'center',\r\n          }}>\r\n          <Typography style={{ userSelect: \"none\" }}>(N)</Typography>\r\n        </animated.div>\r\n      </Paper>\r\n\r\n      <Fab style={{\r\n        width: innerSize,\r\n        height: innerSize,\r\n        borderRadius: '50rem',\r\n        backgroundColor: \"#2196f3\",\r\n        display: 'flex',\r\n        position: 'absolute',\r\n        left: '50%',\r\n        top: '50%',\r\n        margin: -innerSize / 2,\r\n      }}>\r\n        {/* <CardContent > */}\r\n        <Typography style={{\r\n          color: \"#fff\",\r\n          margin: 'auto',\r\n        }}>\r\n          <animated.span>{\r\n            theta.interpolate(t => clampAngle(t).toFixed(0))\r\n            // dt.interpolate(dt =>\r\n            //   clampAngle(theta.value + dt)\r\n            //     .toFixed(1)\r\n            // )\r\n          }</animated.span>° \r\n          {/* (<animated.span>{revs.interpolate(r => r)}</animated.span>) */}\r\n        </Typography>\r\n      </Fab>\r\n    </div>\r\n  )\r\n  // }\r\n};","export const fullVertexShader = `\r\nattribute vec4 position;\r\n\r\nvoid main() {\r\n  gl_Position = position;\r\n}\r\n`;\r\n\r\n// This \"position\" array specifies the vertex positions of the element \r\n// to be displayed by the vertex shader. It represents two triangles,\r\n// each filling half of the screen diagonally, and together filling the\r\n// full canvas space to allow the fragment shader to act on the full canvas.\r\nexport const fullscreenVertexArray = {\r\n  position: [\r\n    -1, -1, 0, \r\n     1, -1, 0, \r\n    -1,  1, 0, \r\n    -1,  1, 0, \r\n     1, -1, 0, \r\n     1,  1, 0\r\n  ],\r\n};","// TODO set max iterations as parameter, crosshair as parameter\r\n\r\nconst smoothMandelbrotShader = `\r\n// Created by inigo quilez - iq/2013\r\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\r\n\r\n\r\n// See here for more information on smooth iteration count:\r\n//\r\n// http://iquilezles.org/www/articles/mset_smooth/mset_smooth.htm\r\n\r\n// TODO: make parameter\r\n#define AA 1\r\n#define MAXI 200\r\n\r\n// set high float precision (lower than this may break colours on mobile)\r\nprecision highp float;\r\n\r\n// need to know the resolution of the canvas\r\nuniform vec2 resolution;\r\n\r\n// properties should be passed as uniforms\r\nuniform int   u_maxI;  \r\nuniform vec2  u_pos;\r\nuniform float u_zoom;\r\nuniform float u_theta;\r\n\r\nvoid main() {    \r\n    // set the initial colour to black\r\n    vec3 col = vec3(0.0);\r\n\r\n    // anti-aliasing\r\n    #if AA>1\r\n    for( int m=0; m<AA; m++ )\r\n    for( int n=0; n<AA; n++ )\r\n    {\r\n        // vec2 p = (-iResolution.xy + 2.0*(fragCoord.xy+vec2(float(m),float(n))/float(AA)))/iResolution.y;\r\n        vec2 p = (2.0*(gl_FragCoord.xy + vec2(float(m), float(n)) / float(AA) ) - resolution.xy)/resolution.y;\r\n        float w = float(AA*m+n);\r\n    #else    \r\n        // adjust pixels to range from [-1, 1]\r\n        vec2 p = (2.0*gl_FragCoord.xy - resolution.xy)/resolution.y;\r\n    #endif\r\n\r\n    // vec2 p = (2.0*gl_FragCoord.xy - resolution.xy)/resolution.y;\r\n    \r\n    // float theta = 0.7;\r\n    \r\n    // calculate sin/cos (tbd)\r\n    // float coa = cos(theta);\r\n    // float sia = sin(theta);\r\n    // float coa = cos(u_theta);\r\n    // float sia = sin(u_theta);    \r\n    \r\n    \r\n\r\n\r\n        // use to rotate viewer (tbd)\r\n        // vec2 xy = vec2(p.x*coa-p.y*sia, p.x*sia+p.y*coa);\r\n        vec2 xy = p;\r\n        vec2 c = u_pos + xy/u_zoom;\r\n\r\n        // smoothing factor (original = 256.0)\r\n        const float B = 32.0;\r\n        float l = 0.0;\r\n        vec2 z  = vec2(0.0);\r\n        for( int i=0; i<MAXI; i++ )\r\n        {\r\n            // z = z*z + c\t\t\r\n            z = vec2( z.x*z.x - z.y*z.y, 2.0*z.x*z.y ) + c;\r\n\r\n            if( dot(z,z)>(B*B) ) break;\r\n\r\n            l += 1.0;\r\n        }\r\n        \r\n        // log2 is undefined for dot(z,z) = 0; strange colouring in bulbs otherwise\r\n        float dz = dot(z,z);\r\n        if (dz > 1.0) {\r\n            l = l - log2(log2(dz)) + 4.0; \r\n            //    a 0.405 multiplier here  vvvv  also looks good\r\n            col += 0.5 + 0.5*cos( 3.0 +  l*0.15 + vec3(0.0, 0.6, 1.0));\r\n        }\r\n\r\n    #if AA>1\r\n    }\r\n    col /= float(AA*AA);\r\n    #endif\r\n\r\n\r\n    // add crosshair\r\n    float thresh = 1.0;\r\n    if (abs(2.0*gl_FragCoord.x - resolution.x) <= thresh || abs(2.0*gl_FragCoord.y - resolution.y) <= thresh) {\r\n        col = .9 - col;\r\n    }\r\n\r\n    // Output to screen\r\n    gl_FragColor = vec4( col, 1.0 );\r\n}\r\n`;\r\n\r\nexport default smoothMandelbrotShader;","import React, { Fragment, useRef, useEffect, useCallback } from \"react\";\r\nimport _ from 'lodash';\r\nimport { Typography, Card } from \"@material-ui/core\";\r\n\r\nimport { addV, useGesture } from \"react-use-gesture\";\r\nimport { scale } from 'vec-la';\r\n\r\nimport { animated } from \"react-spring\";\r\n\r\nimport * as twgl from \"twgl.js\";\r\n\r\nimport { fullVertexShader, fullscreenVertexArray } from \"../shaders/fullVertexShader\";\r\nimport smoothMandelbrotShader from \"../shaders/smoothMandelbrotShader\";\r\nimport mShader from \"../shaders/smooth_mandelbrot_shader.glsl\";\r\n\r\nexport default function MandelbrotRenderer(props) {\r\n\r\n  // variables to hold canvas and webgl information\r\n  const requestRef = useRef(null);\r\n  const gl = useRef(null);\r\n  const bufferInfo = useRef(null);\r\n  const programInfo = useRef(null);\r\n\r\n  const canvasRef = useRef(null);\r\n\r\n  // this multiplier subdivides the screen space into smaller increments\r\n  // to allow for velocity calculations to not immediately decay, due to the\r\n  // otherwise small scale that is being mapped to the screen.\r\n  const screenScaleMultiplier = props.screenmult;\r\n\r\n  // temporary bounds to prevent excessive panning\r\n  // eslint-disable-next-line\r\n  const radialBound = 1;\r\n  const relativeRadialBound = radialBound;// / -screenScaleMultiplier;\r\n  const bounds = {\r\n    top:    relativeRadialBound,\r\n    bottom: relativeRadialBound,\r\n    left:   relativeRadialBound,\r\n    right:  relativeRadialBound,\r\n  };\r\n\r\n\r\n  // read incoming props\r\n  const [{ pos, realPos }, setControlPos] = props.controls.pos;\r\n  const [{ theta, last_pointer_angle }, setControlRot] = props.controls.rot;\r\n  const [{ zoom, last_pointer_dist, minZoom, maxZoom }, setControlZoom] = props.controls.zoom;\r\n  const maxI = props.maxiter;\r\n\r\n  // the hook responsible for handling gestures\r\n  const touchBind = useGesture({\r\n\r\n    // prevent some browser events such as swipe-based navigation or\r\n    // pinch-based zoom and instead redirect them to this handler\r\n    onDragStart:  ({ event }) => event.preventDefault(),\r\n    onPinchStart: ({ event }) => event.preventDefault(),\r\n\r\n    onPinch: ({ offset: [d, a], down, vdva: [vd, va], last, memo = [theta.getValue(), last_pointer_angle.getValue(), zoom.getValue(), last_pointer_dist.getValue()] }) => {\r\n      // alert(mx, my)\r\n      // let [theta, lpa] = memo\r\n      let [t, lpa, z, lpd] = memo;\r\n      console.log(d);\r\n      let d_rel = d / 250;\r\n      let curr_zoom = zoom.getValue();\r\n\r\n      setControlZoom({\r\n        zoom: _.clamp(z + (d_rel - lpd) * Math.sign(curr_zoom) * Math.abs(curr_zoom ** 0.9), minZoom.getValue(), maxZoom.getValue()),\r\n        last_pointer_dist: d_rel,\r\n\r\n        immediate: down,\r\n        // config: { velocity: vd, decay: true }\r\n      });\r\n\r\n      setControlRot({\r\n        theta: t + (a - lpa),\r\n        last_pointer_angle: a,\r\n\r\n        immediate: down,\r\n        // config: { velocity: va, decay: true }\r\n      });\r\n\r\n      return memo;\r\n    },\r\n\r\n    onPinchEnd: ({ vdva: [vd, va] }) => {\r\n      setControlRot({\r\n        // set theta so it's remembered next time\r\n        theta: va,\r\n\r\n        config: { velocity: va, decay: true }\r\n      });\r\n    },\r\n\r\n    onDrag: ({ down, movement, velocity, direction, memo = pos.getValue() }) => {\r\n\r\n      // change according to this formula:\r\n      // move (x, y) in the opposite direction of drag (pan with cursor)\r\n      // divide by canvas size to scale appropriately\r\n      // multiply by 2 to correct scaling on viewport\r\n      // use screen multiplier for more granularity\r\n      let realZoom = gl.current.canvas.height * zoom.getValue() * screenScaleMultiplier;\r\n      \r\n      let plotMovement = scale(movement, 2/realZoom);\r\n\r\n      let relMove = [plotMovement[0], -plotMovement[1]];\r\n      let relDir  = [direction[0], -direction[1]];\r\n\r\n      setControlPos({\r\n        pos: addV(memo, relMove),                    // add the displacement to the starting position\r\n        immediate: down,                                  // immediately apply if the gesture is active\r\n        config: { \r\n          velocity: scale(relDir, velocity/realZoom),  // set the velocity (gesture momentum)\r\n          decay: true,\r\n        },\r\n      });\r\n\r\n      return memo;\r\n    },\r\n\r\n  }, { \r\n    event: { passive: false, capture: false }, \r\n    domTarget: canvasRef,\r\n    // The config object passed to useGesture has drag, wheel, scroll, pinch and move keys\r\n    // for specific gesture options. See here for more details.\r\n    // drag: {\r\n    //   bounds,\r\n    //   rubberband: true,\r\n    // }\r\n  });\r\n\r\n  useEffect(touchBind, [touchBind]);  \r\n\r\n  // the main render function for WebGL\r\n  const render = useCallback(time => {\r\n    twgl.resizeCanvasToDisplaySize(gl.current.canvas);\r\n    gl.current.viewport(0, 0, gl.current.canvas.width, gl.current.canvas.height);\r\n\r\n    // values to pass to the shader\r\n    const uniforms = {\r\n      resolution: [gl.current.canvas.width, gl.current.canvas.height],\r\n      u_zoom: zoom.getValue(),\r\n      u_pos:  scale(pos.getValue(), -screenScaleMultiplier),  // re-scale from screen coordinates to plot coordinates\r\n      u_maxI: maxI,\r\n    };\r\n\r\n    gl.current.useProgram(programInfo.current.program);\r\n    twgl.setBuffersAndAttributes(gl.current, programInfo.current, bufferInfo.current);\r\n    twgl.setUniforms(programInfo.current, uniforms);\r\n    twgl.drawBufferInfo(gl.current, bufferInfo.current);\r\n    // The 'state' will always be the initial value here\r\n    requestRef.current = requestAnimationFrame(render);\r\n  }, [maxI, pos, screenScaleMultiplier, zoom]);\r\n  \r\n  useEffect(() => {\r\n    gl.current = canvasRef.current.getContext('webgl');\r\n    console.log(`got canvas context: ${gl.current}`);\r\n    // var glc = gl.current;\r\n    // var prec = glc.getShaderPrecisionFormat(glc.FRAGMENT_SHADER, glc.HIGH_FLOAT);\r\n//     alert(`\\\r\n// precision = ${prec.precision},\r\n// rangeMin = ${prec.rangeMin},\r\n// rangeMax = ${prec.rangeMax} \r\n//     `);\r\n\r\n    // TODO : figure out shader sources!\r\n    programInfo.current = twgl.createProgramInfo(gl.current, [fullVertexShader, smoothMandelbrotShader]);\r\n\r\n    bufferInfo.current = twgl.createBufferInfoFromArrays(gl.current, fullscreenVertexArray);\r\n\r\n    requestRef.current = requestAnimationFrame(render);\r\n    return () => cancelAnimationFrame(requestRef.current);\r\n  }, [render]); // Make sure the effect runs only once\r\n\r\n\r\n  return (\r\n\r\n    <Fragment>\r\n      <Card\r\n        style={{\r\n          width: \"auto\",\r\n          position: \"absolute\",\r\n          zIndex: 2,\r\n          left: 0,\r\n          bottom: 0,\r\n          margin: 20,\r\n          padding: 5,\r\n        }}\r\n        >\r\n        <Typography align=\"right\">\r\n          <animated.span>{pos.interpolate((x, y) => (-x * screenScaleMultiplier).toFixed(7))}</animated.span> : x<br />\r\n          <animated.span>{pos.interpolate((x, y) => (-y * screenScaleMultiplier).toFixed(7))}</animated.span> : y\r\n        </Typography>\r\n      </Card>\r\n      <canvas\r\n        id=\"mandelbrot\"\r\n        className=\"renderer\"\r\n        style={{\r\n          // zIndex: 1,\r\n          // transform: \"rotateX(180deg)\",\r\n        }}\r\n        ref={canvasRef}\r\n      />\r\n    </Fragment>\r\n  )\r\n\r\n\r\n}","// TODO set max iterations as parameter\r\n\r\nconst smoothJuliaShader = `\r\n#define maxI 200\r\n\r\n// set high float precision (lower than this may break colours on mobile)\r\nprecision highp float;\r\n\r\n// need to know the resolution of the canvas\r\nuniform vec2 resolution;\r\n\r\n// properties should be passed as uniforms\r\nuniform int   u_maxI;  \r\nuniform vec2  u_pos;\r\nuniform float u_zoom;\r\nuniform float u_theta;\r\n\r\n// void mainImage( out vec4 fragColor, in vec2 fragCoord )\r\n// {\r\n// \tvec2 uv = fragCoord.xy - iResolution.xy * 0.5;\r\n// \tuv *= 2.5 / min( iResolution.x, iResolution.y );\r\n// \tvec2 c = vec2( 0.37+cos(iTime*1.23462673423)*0.04, sin(iTime*1.43472384234)*0.10+0.50);\r\n// \tvec2 z = uv;\r\n// \tfloat scale = 0.01;\r\n//  float l = 0.0;\r\n// \tfor ( int i = 0 ; i < maxI; i++ ) {\r\n// \t\tz = c + vec2( z.x*z.x-z.y*z.y, 2.0*z.x*z.y );\r\n// \t\tif ( dot( z, z ) > 4.0 ) {\r\n// \t\t\tbreak;\r\n// \t\t}\r\n//         l += 1.0;\r\n// \t}\r\n//     float sl = l - log2(log2(dot(z,z))) + 4.0; \r\n// \tvec3 col = vec3(0.5) + 0.5*cos( 3.0 + sl*0.15 + vec3(0.0,0.6,1.0));\r\n// \tfragColor = vec4(col, 0);\r\n// }\r\n\r\nvoid main() {    \r\n  // set the initial colour to black\r\n  vec3 col = vec3(0.0);\r\n\r\n  // adjust pixels to range from [-1, 1]\r\n  vec2 p = (2.0*gl_FragCoord.xy - resolution.xy)/resolution.y;\r\n  \r\n  vec2 xy = p;\r\n  vec2 c = u_pos;  \r\n\r\n  // smoothing factor (original = 256.0)\r\n  const float B = 32.0;\r\n  float l = 0.0;\r\n  vec2  z = p;\r\n  for( int i=0; i<200; i++ ) {\r\n      // z = z*z + c\t\t\r\n      z = vec2( z.x*z.x - z.y*z.y, 2.0*z.x*z.y ) + c;\r\n\r\n      if( dot(z,z)>(B*B) ) break;\r\n\r\n      l += 1.0;\r\n  }\r\n  \r\n  // float al = smoothstep( -0.1, 0.0, 1.0);\r\n  // log2 is undefined for dot(z,z) = 0; strange colouring in bulbs otherwise\r\n  float dz = dot(z,z);\r\n  if (dz > 1.0) {\r\n      l = l - log2(log2(dz)) + 4.0; \r\n      //    a 0.405 multiplier here  vvvv  also looks good\r\n      col += 0.5 + 0.5*cos( 3.0 +  l*0.15 + vec3(0.0, 0.6, 1.0));\r\n  }\r\n\r\n  // Output to screen\r\n  gl_FragColor = vec4( col, 1.0 );\r\n  // gl_FragColor = vec4( vec3(1.0), 1.0 );\r\n}\r\n`;\r\n\r\nexport default smoothJuliaShader;","import React, { useRef, useEffect, useCallback, Fragment } from \"react\";\r\nimport { useGesture, addV } from \"react-use-gesture\";\r\nimport { scale } from \"vec-la\";\r\nimport * as twgl from \"twgl.js\";\r\nimport { Card, Typography } from \"@material-ui/core\";\r\nimport { animated } from \"react-spring\";\r\nimport { fullVertexShader, fullscreenVertexArray } from \"../shaders/fullVertexShader\";\r\nimport smoothJuliaShader from \"../shaders/smoothJuliaShader\";\r\nimport _ from \"lodash\";\r\n\r\n\r\nexport default function JuliaRenderer(props) {\r\n\r\n  // variables to hold canvas and webgl information\r\n  const requestRef = useRef(null);\r\n  const gl = useRef(null);\r\n  const bufferInfo = useRef(null);\r\n  const programInfo = useRef(null);\r\n\r\n  const touchTarget = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  // this multiplier subdivides the screen space into smaller increments\r\n  // to allow for velocity calculations to not immediately decay, due to the\r\n  // otherwise small scale that is being mapped to the screen.\r\n  const screenScaleMultiplier = -1e-7;\r\n\r\n  // read incoming props\r\n  const [{ pos }, setControlPos] = props.controls.pos;\r\n  const [{ theta, last_pointer_angle }, setControlRot] = props.controls.rot;\r\n  const [{ zoom, last_pointer_dist, minZoom, maxZoom }, setControlZoom] = props.controls.zoom;\r\n  const maxI = props.maxiter;\r\n\r\n\r\n  // the hook responsible for handling gestures\r\n  const touchBind = useGesture({\r\n\r\n    // prevent some browser events such as swipe-based navigation or\r\n    // pinch-based zoom and instead redirect them to this handler\r\n    onDragStart:  ({ event }) => event.preventDefault(),\r\n    onPinchStart: ({ event }) => event.preventDefault(),\r\n\r\n    onPinch: ({ offset: [d, a], down, vdva: [vd, va], last, memo = [theta.getValue(), last_pointer_angle.getValue(), zoom.getValue(), last_pointer_dist.getValue()] }) => {\r\n      // alert(mx, my)\r\n      // let [theta, lpa] = memo\r\n      let [t, lpa, z, lpd] = memo;\r\n      console.log(d);\r\n      let d_rel = d / 250;\r\n      let curr_zoom = zoom.getValue();\r\n\r\n      setControlZoom({\r\n        zoom: _.clamp(z + (d_rel - lpd) * Math.sign(curr_zoom) * Math.abs(curr_zoom ** 0.9), minZoom.getValue(), maxZoom.getValue()),\r\n        last_pointer_dist: d_rel,\r\n\r\n        immediate: down,\r\n        // config: { velocity: vd, decay: true }\r\n      });\r\n\r\n      setControlRot({\r\n        theta: t + (a - lpa),\r\n        last_pointer_angle: a,\r\n\r\n        immediate: down,\r\n        // config: { velocity: va, decay: true }\r\n      });\r\n\r\n      return memo;\r\n    },\r\n\r\n    onPinchEnd: ({ vdva: [vd, va] }) => {\r\n      setControlRot({\r\n        // set theta so it's remembered next time\r\n        theta: va,\r\n\r\n        config: { velocity: va, decay: true }\r\n      });\r\n    },\r\n\r\n    onDrag: ({ down, movement, velocity, direction, memo = pos.getValue() }) => {\r\n\r\n      // change according to this formula:\r\n      // move (x, y) in the opposite direction of drag (pan with cursor)\r\n      // divide by canvas size to scale appropriately\r\n      // multiply by 2 to correct scaling on viewport\r\n      // use screen multiplier for more granularity\r\n      let realZoom = gl.current.canvas.height * zoom.getValue() * screenScaleMultiplier;\r\n      \r\n      let plotMovement = scale(movement, 2/realZoom);\r\n\r\n      let relMove = [plotMovement[0], -plotMovement[1]];\r\n      let relDir  = [direction[0], -direction[1]];\r\n\r\n      setControlPos({\r\n        pos: addV(memo, relMove),                    // add the displacement to the starting position\r\n        immediate: down,                                  // immediately apply if the gesture is active\r\n        config: { \r\n          velocity: scale(relDir, velocity/realZoom),  // set the velocity (gesture momentum)\r\n          decay: true,\r\n        },\r\n      });\r\n\r\n      return memo;\r\n    },\r\n\r\n  }, { \r\n    event: { passive: false, capture: false }, \r\n    domTarget: canvasRef,\r\n    // The config object passed to useGesture has drag, wheel, scroll, pinch and move keys\r\n    // for specific gesture options. See here for more details.\r\n    // drag: {\r\n    //   bounds,\r\n    //   rubberband: true,\r\n    // }\r\n  });\r\n\r\n  useEffect(touchBind, [touchBind]);  \r\n\r\n\r\n  // the main render function for WebGL\r\n  const render = useCallback(time => {\r\n    twgl.resizeCanvasToDisplaySize(gl.current.canvas);\r\n    gl.current.viewport(0, 0, gl.current.canvas.width, gl.current.canvas.height);\r\n\r\n    // values to pass to the shader\r\n    const uniforms = {\r\n      resolution: [gl.current.canvas.width, gl.current.canvas.height],\r\n      u_zoom: zoom.getValue(),\r\n      u_pos:  scale(pos.getValue(), -screenScaleMultiplier),  // re-scale from screen coordinates to plot coordinates\r\n      u_maxI: maxI,\r\n    };\r\n\r\n    gl.current.useProgram(programInfo.current.program);\r\n    twgl.setBuffersAndAttributes(gl.current, programInfo.current, bufferInfo.current);\r\n    twgl.setUniforms(programInfo.current, uniforms);\r\n    twgl.drawBufferInfo(gl.current, bufferInfo.current);\r\n    // The 'state' will always be the initial value here\r\n    requestRef.current = requestAnimationFrame(render);\r\n  }, [maxI, pos, screenScaleMultiplier, zoom]);\r\n  \r\n  useEffect(() => {\r\n    gl.current = canvasRef.current.getContext('webgl');\r\n    console.log(`got canvas context: ${gl.current}`);\r\n    // var glc = gl.current;\r\n    // var prec = glc.getShaderPrecisionFormat(glc.FRAGMENT_SHADER, glc.HIGH_FLOAT);\r\n//     alert(`\\\r\n// precision = ${prec.precision},\r\n// rangeMin = ${prec.rangeMin},\r\n// rangeMax = ${prec.rangeMax} \r\n//     `);\r\n\r\n    // TODO : figure out shader sources!\r\n    programInfo.current = twgl.createProgramInfo(gl.current, [fullVertexShader, smoothJuliaShader]);\r\n\r\n    bufferInfo.current = twgl.createBufferInfoFromArrays(gl.current, fullscreenVertexArray);\r\n\r\n    requestRef.current = requestAnimationFrame(render);\r\n    return () => cancelAnimationFrame(requestRef.current);\r\n  }, [render]); // Make sure the effect runs only once\r\n\r\n  \r\n  return (\r\n    <canvas\r\n      id=\"julia\"\r\n      className=\"renderer\"\r\n      style={{\r\n        zIndex: 1,\r\n        // transform: \"rotateX(180deg)\",\r\n        // width: \"100%\",\r\n        // height: \"100%\",\r\n      }}\r\n      ref={canvasRef}\r\n    />\r\n  )\r\n}","import React, { Fragment, useState } from 'react';\r\nimport './App.css';\r\nimport { Grid } from '@material-ui/core';\r\nimport ZoomBar from './components/ZoomBar';\r\nimport IterationSlider from './components/IterationSlider';\r\nimport RotationControl from './components/RotationControl';\r\n\r\nimport 'typeface-roboto';\r\nimport MandelbrotRenderer from './components/MandelbrotRenderer.jsx';\r\nimport { useSpring } from 'react-spring';\r\nimport JuliaRenderer from './components/JuliaRenderer';\r\nimport { useWindowSize } from './components/utils';\r\n\r\n\r\nfunction App() {\r\n\r\n  const size = useWindowSize();\r\n\r\n  let defaultSpringConfig = { mass: 1, tension: 100, friction: 200 };\r\n\r\n  let maxIter = useState(100);\r\n  // eslint-disable-next-line\r\n  let [maxI, setMaxI] = maxIter;\r\n\r\n  // this multiplier subdivides the screen space into smaller increments\r\n  // to allow for velocity calculations to not immediately decay, due to the\r\n  // otherwise small scale that is being mapped to the screen.\r\n  const screenScaleMultiplier = -1e-7;\r\n\r\n  const startPos = [-.743030, .126433];\r\n  // const startPos = [-.7426482, .1271875 ];\r\n  // const startPos = [-0.1251491, -0.8599647];\r\n  const startZoom = 165.0;\r\n\r\n  const mandelbrotControls = {\r\n    pos: useSpring(() => ({\r\n      pos: startPos.map(x => -x / screenScaleMultiplier),\r\n      config: defaultSpringConfig,\r\n    })),\r\n\r\n    rot: useSpring(() => ({\r\n      theta: 0,\r\n      last_pointer_angle: 0,\r\n      itheta: 0,\r\n      config: defaultSpringConfig,\r\n    })),\r\n\r\n    zoom: useSpring(() => ({\r\n      zoom: startZoom,\r\n      last_pointer_dist: 0,\r\n  \r\n      minZoom: 0.5,\r\n      maxZoom: 100000,\r\n  \r\n      config: { mass: 1, tension: 600, friction: 50 },\r\n    })),\r\n  }\r\n  \r\n  return (\r\n    <Fragment>\r\n      <Grid\r\n        container\r\n        direction={size.width < size.height ? \"column\" : \"row\"}\r\n        justify=\"center\"\r\n        className=\"fullSize\"\r\n        style={{\r\n          position: \"absolute\",\r\n        }}\r\n      >\r\n        <Grid item xs className=\"renderer\">\r\n          <MandelbrotRenderer\r\n            controls={mandelbrotControls}\r\n            maxiter={maxI}\r\n            screenmult={screenScaleMultiplier}\r\n          />\r\n        </Grid>\r\n        <Grid item xs className=\"renderer\" \r\n          // style={{ display: \"none\" }}\r\n          >\r\n          <JuliaRenderer\r\n            controls={mandelbrotControls}\r\n            maxiter={maxI}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Grid\r\n        container\r\n        direction=\"column\"\r\n        justify=\"space-evenly\"\r\n        alignItems=\"flex-end\"\r\n      >\r\n        <ZoomBar\r\n          controller={mandelbrotControls.zoom}\r\n        />\r\n\r\n        <RotationControl\r\n          className=\"Control\"\r\n          controller={mandelbrotControls.rot}\r\n          style={{\r\n            display: \"none\",\r\n          }}\r\n        />\r\n\r\n        <IterationSlider\r\n          maxiter={maxIter}\r\n          style={{\r\n            display: \"none\",\r\n          }}\r\n        />\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { useEffect, useState } from \"react\";\r\n\r\n// https://usehooks.com/useWindowSize/\r\nexport function useWindowSize() {\r\n  const isClient = typeof window === 'object';\r\n\r\n  function getSize() {\r\n    return {\r\n      width: isClient ? window.innerWidth : undefined,\r\n      height: isClient ? window.innerHeight : undefined\r\n    };\r\n  }\r\n\r\n  const [windowSize, setWindowSize] = useState(getSize);\r\n\r\n  useEffect(() => {\r\n    if (!isClient) {\r\n      // return false;\r\n      return;\r\n    }\r\n    \r\n    function handleResize() {\r\n      setWindowSize(getSize());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []); // Empty array ensures that effect is only run on mount and unmount\r\n\r\n  return windowSize;\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}